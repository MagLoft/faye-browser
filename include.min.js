var Faye={VERSION:"1.1.1",BAYEUX_VERSION:"1.0",ID_LENGTH:160,JSONP_CALLBACK:"jsonpcallback",CONNECTION_TYPES:["long-polling","cross-origin-long-polling","callback-polling","websocket","eventsource","in-process"],MANDATORY_CONNECTION_TYPES:["long-polling","callback-polling","in-process"],ENV:"undefined"!=typeof window?window:global,extend:function(n,r,e){if(!r)return n;for(var t in r)r.hasOwnProperty(t)&&(n.hasOwnProperty(t)&&e===!1||n[t]!==r[t]&&(n[t]=r[t]));return n},random:function(n){n=n||this.ID_LENGTH;for(var r=Math.ceil(n*Math.log(2)/Math.log(36)),e=csprng(n,36);e.length<r;)e="0"+e;return e},validateOptions:function(n,r){for(var e in n)if(this.indexOf(r,e)<0)throw new Error("Unrecognized option: "+e)},clientIdFromMessages:function(n){var r=this.filter([].concat(n),function(n){return"/meta/connect"===n.channel});return r[0]&&r[0].clientId},copyObject:function(n){var r,e,t;if(n instanceof Array){for(r=[],e=n.length;e--;)r[e]=Faye.copyObject(n[e]);return r}if("object"==typeof n){r=null===n?null:{};for(t in n)r[t]=Faye.copyObject(n[t]);return r}return n},commonElement:function(n,r){for(var e=0,t=n.length;t>e;e++)if(-1!==this.indexOf(r,n[e]))return n[e];return null},indexOf:function(n,r){if(n.indexOf)return n.indexOf(r);for(var e=0,t=n.length;t>e;e++)if(n[e]===r)return e;return-1},map:function(n,r,e){if(n.map)return n.map(r,e);var t=[];if(n instanceof Array)for(var i=0,o=n.length;o>i;i++)t.push(r.call(e||null,n[i],i));else for(var l in n)n.hasOwnProperty(l)&&t.push(r.call(e||null,l,n[l]));return t},filter:function(n,r,e){if(n.filter)return n.filter(r,e);for(var t=[],i=0,o=n.length;o>i;i++)r.call(e||null,n[i],i)&&t.push(n[i]);return t},asyncEach:function(n,r,e,t){var i=n.length,o=-1,l=0,f=!1,a=function(){return l-=1,o+=1,o===i?e&&e.call(t):void r(n[o],u)},c=function(){if(!f){for(f=!0;l>0;)a();f=!1}},u=function(){l+=1,c()};u()},toJSON:function(n){return this.stringify?this.stringify(n,function(n,r){return this[n]instanceof Array?this[n]:r}):JSON.stringify(n)}};"undefined"!=typeof module?module.exports=Faye:"undefined"!=typeof window&&(window.Faye=Faye);